# 吸血鬼节奏游戏 - 10张地图系统设计方案

## 设计理念

参考《恶魔城：月下夜想曲》的地图设计，创建一个互相连通的哥特式城堡世界。玩家通过通关解锁新区域，逐步探索整个吸血鬼领地。

## 整体架构

### 地图连通性设计

```
                    [10.王座厅]
                         ↑
    [8.图书馆] ← [7.城堡大厅] → [9.炼金实验室]
         ↑              ↑
    [6.诅咒森林] ← [5.古老陵墓] → [4.迷雾墓地]
                       ↑              ↑
                  [3.地下墓穴] ← [2.钟楼]
                       ↑
                  [1.废弃教堂]
```

### 10张地图详细设计

---

#### **第一章：教堂区域（The Church District）**

**1. 废弃教堂（Abandoned Church）** ⛪
- **主题**：破败的圣地，月光透过彩色玻璃
- **音乐**：Nocturnal Hunger（已有）
- **敌人**：普通蝙蝠、小型吸血鬼
- **BOSS**：堕落牧师（Fallen Priest）
- **解锁条件**：游戏开始即可进入
- **通关奖励**：解锁钟楼和地下墓穴

**2. 教堂钟楼（Bell Tower）** 🔔
- **主题**：高耸的钟楼，齿轮和钟摆
- **音乐**：节奏更快的钟声主题曲
- **敌人**：飞行蝙蝠、钟楼守卫
- **BOSS**：巨型钟楼怪兽（Clockwork Gargoyle）
- **解锁条件**：通关废弃教堂
- **通关奖励**：解锁迷雾墓地
- **特色**：垂直关卡，需要向上攀爬

**3. 地下墓穴（Catacombs）** ⚰️
- **主题**：阴暗的地下墓室，骷髅和棺材
- **音乐**：低沉压抑的哥特音乐
- **敌人**：骷髅战士、僵尸
- **BOSS**：墓穴守护者（Crypt Guardian）
- **解锁条件**：通关废弃教堂
- **通关奖励**：解锁古老陵墓
- **特色**：狭窄通道，需要精准操作

---

#### **第二章：墓地区域（The Graveyard District）**

**4. 迷雾墓地（Misty Graveyard）** 🪦
- **主题**：月光下的墓地，浓雾弥漫
- **音乐**：Electric Shadows Whispering Doom（已有）
- **敌人**：墓地蝙蝠、幽灵
- **BOSS**：墓地领主（Graveyard Lord）
- **解锁条件**：通关钟楼
- **通关奖励**：解锁古老陵墓
- **特色**：开阔场景，雾气视觉效果

**5. 古老陵墓（Ancient Tomb）** 🏛️
- **主题**：古代贵族的陵墓，华丽而诡异
- **音乐**：史诗感的管风琴音乐
- **敌人**：古代骑士、吸血鬼贵族
- **BOSS**：不死骑士（Undead Knight）
- **解锁条件**：通关地下墓穴或迷雾墓地（二选一）
- **通关奖励**：解锁诅咒森林和城堡大厅
- **特色**：核心枢纽区域，连接3个方向

**6. 诅咒森林（Cursed Forest）** 🌲
- **主题**：被黑暗笼罩的森林，扭曲的树木
- **音乐**：神秘的森林主题
- **敌人**：狼人、森林幽灵
- **BOSS**：森林狼王（Alpha Werewolf）
- **解锁条件**：通关古老陵墓
- **通关奖励**：解锁图书馆
- **特色**：横向卷轴，树林遮挡视线

---

#### **第三章：城堡区域（The Castle District）**

**7. 城堡大厅（Castle Hall）** 🏰
- **主题**：宏伟的城堡大厅，红地毯和吊灯
- **音乐**：Eternal Bloodlust（已有）
- **敌人**：城堡守卫、精英蝙蝠
- **BOSS**：城堡统帅（Castle Commander）
- **解锁条件**：通关古老陵墓
- **通关奖励**：解锁图书馆、炼金实验室、王座厅
- **特色**：核心枢纽，连接最多区域

**8. 禁忌图书馆（Forbidden Library）** 📚
- **主题**：古老的图书馆，飞舞的书页
- **音乐**：神秘的知识主题
- **敌人**：魔法书、幽灵学者
- **BOSS**：图书馆馆长（Librarian Lich）
- **解锁条件**：通关诅咒森林或城堡大厅（二选一）
- **通关奖励**：解锁王座厅
- **特色**：书架迷宫，需要探索

**9. 炼金实验室（Alchemy Lab）** ⚗️
- **主题**：诡异的实验室，药剂和实验器材
- **音乐**：工业感的电子音乐
- **敌人**：实验失败品、炼金傀儡
- **BOSS**：疯狂炼金术士（Mad Alchemist）
- **解锁条件**：通关城堡大厅
- **通关奖励**：解锁王座厅
- **特色**：机关陷阱，需要躲避

**10. 王座厅（Throne Room）** 👑
- **主题**：吸血鬼王的王座，最终决战
- **音乐**：史诗级BOSS战音乐
- **敌人**：精英护卫
- **BOSS**：吸血鬼之王（Vampire King）- 最终BOSS
- **解锁条件**：通关图书馆、炼金实验室、城堡大厅（三选二）
- **通关奖励**：游戏通关，解锁隐藏模式
- **特色**：多阶段BOSS战

---

## 解锁逻辑

### 线性进度（必经之路）
1. 废弃教堂（起点）
2. 钟楼 或 地下墓穴
3. 古老陵墓（第一个枢纽）
4. 城堡大厅（第二个枢纽）
5. 王座厅（终点）

### 分支探索（可选路线）
- 玩家可以选择先打钟楼还是地下墓穴
- 可以选择先打迷雾墓地还是直接进古老陵墓
- 可以选择先打图书馆还是炼金实验室

### 最短通关路线
废弃教堂 → 地下墓穴 → 古老陵墓 → 城堡大厅 → 王座厅（5关）

### 完美探索路线
废弃教堂 → 钟楼 → 迷雾墓地 → 地下墓穴 → 古老陵墓 → 诅咒森林 → 图书馆 → 城堡大厅 → 炼金实验室 → 王座厅（10关）

---

## 地图界面设计

### 视觉呈现
- 采用2D侧视图，类似恶魔城的城堡剖面图
- 显示所有10个区域的空间关系
- 已解锁区域：彩色显示，可点击进入
- 未解锁区域：灰色剪影，显示锁图标
- 当前位置：高亮显示

### 交互功能
- 点击已解锁区域查看详情（BOSS、最高分、完成状态）
- 显示区域之间的连接路径
- 显示总体探索进度（X/10）
- 显示收集要素（隐藏道具、成就）

### 动画效果
- 通关后，新区域解锁动画（光芒扩散）
- 区域之间的路径逐渐点亮
- 鼠标悬停时区域微微发光

---

## 技术实现要点

### 数据结构
```typescript
interface MapNode {
  id: string;
  name: string;
  theme: string;
  music: string;
  position: { x: number; y: number }; // 地图上的坐标
  connections: string[]; // 连接的区域ID
  unlockConditions: string[]; // 需要通关的前置区域
  isUnlocked: boolean;
  isCompleted: boolean;
  highScore: number;
  boss: string;
}
```

### 解锁算法
```typescript
function checkUnlock(nodeId: string, progress: PlayerProgress): boolean {
  const node = MAP_NODES[nodeId];
  // 检查是否满足任一解锁条件
  return node.unlockConditions.some(conditionId => 
    progress.completedStages.includes(conditionId)
  );
}
```

---

## 音乐和美术资源需求

### 需要新增的音乐（7首）
1. 钟楼主题（节奏感强，钟声元素）
2. 地下墓穴主题（低沉压抑）
3. 古老陵墓主题（史诗管风琴）
4. 诅咒森林主题（神秘诡异）
5. 禁忌图书馆主题（知识与魔法）
6. 炼金实验室主题（工业电子）
7. 王座厅BOSS战主题（史诗级）

### 需要新增的背景图（7张）
1. 钟楼场景（齿轮、钟摆、高处视角）
2. 地下墓穴场景（棺材、骷髅、火把）
3. 古老陵墓场景（石柱、雕像、华丽装饰）
4. 诅咒森林场景（扭曲树木、迷雾、月光）
5. 禁忌图书馆场景（书架、飞舞书页、魔法光）
6. 炼金实验室场景（药剂瓶、实验台、绿色液体）
7. 王座厅场景（王座、红色窗帘、华丽吊灯）

### 地图界面美术
- 城堡剖面图背景（整体框架）
- 10个区域的图标/缩略图
- 连接路径的线条和节点
- 锁定/解锁状态的视觉效果

---

## 下一步行动

1. ✅ 研究恶魔城地图设计理念
2. ✅ 设计10张地图架构和故事线
3. ⏭️ 生成地图选择界面的视觉资产
4. ⏭️ 实现地图UI和解锁系统
5. ⏭️ 测试并交付
